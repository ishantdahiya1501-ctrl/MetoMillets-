!function(){"use strict";const t=async(t,o,r)=>{const e=(()=>{const t=(window.MTM_API_BASE_URL||"").toString().trim(),o=(()=>{try{return(localStorage.getItem("MTM_API_BASE_URL")||"").toString().trim()}catch{return""}})(),r=(t||o||"").toString().trim(),e=r.endsWith("/")?r.slice(0,-1):r;return!e&&(()=>{try{const{protocol:t,hostname:o}=window.location||{};return!("file:"!==t&&o&&"localhost"!==o&&"127.0.0.1"!==o&&!o.startsWith("192.168.")&&!o.startsWith("10.")&&!/^172\.(1[6-9]|2\d|3[0-1])\./.test(o))}catch{return!1}})()?(()=>{try{const{hostname:t}=window.location||{};return`http://${t||"localhost"}:8080`}catch{return"http://localhost:8080"}})():e})(),n=`${e}${o}`,i=await fetch(n,{method:t,headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0,credentials:"include"}),a=await(async t=>{if(!(t.headers.get("content-type")||"").toLowerCase().includes("application/json"))return null;try{return await t.json()}catch{return null}})(i);if(!i.ok){if(!e&&404===i.status&&null===a){const t=new Error("API_NOT_CONFIGURED");throw t.status=404,t.code="API_NOT_CONFIGURED",t.details={hint:"Configure a Netlify /api proxy (_redirects) or set MTM_API_BASE_URL to your backend URL."},t}const t=a?.error||"SERVER_ERROR",o=a?.details,r=new Error(t);throw r.status=i.status,r.code=t,r.details=o,r}return a};window.authClient={register:o=>t("POST","/api/auth/register",o),login:o=>t("POST","/api/auth/login",o),me:()=>t("GET","/api/auth/me"),logout:()=>t("POST","/api/auth/logout")}}();