!function(){const t=()=>{const t=(window.MTM_API_BASE_URL||"").toString().trim(),o=(()=>{try{return(localStorage.getItem("MTM_API_BASE_URL")||"").toString().trim()}catch{return""}})(),r=(t||o||"").toString().trim(),n=r.endsWith("/")?r.slice(0,-1):r;return!n&&(()=>{try{const{protocol:t,hostname:o}=window.location||{};return!("file:"!==t&&o&&"localhost"!==o&&"127.0.0.1"!==o&&!o.startsWith("192.168.")&&!o.startsWith("10.")&&!/^172\.(1[6-9]|2\d|3[0-1])\./.test(o))}catch{return!1}})()?(()=>{try{const{hostname:t}=window.location||{};return`http://${t||"localhost"}:8080`}catch{return"http://localhost:8080"}})():n};window.mtmApi={getApiBaseUrl:t,request:async(o,r,n)=>{const e=`${t()}${r}`,s=await fetch(e,{method:o,headers:{"Content-Type":"application/json"},credentials:"include",body:n?JSON.stringify(n):void 0}),i=(s.headers.get("content-type")||"").toLowerCase().includes("application/json")?await s.json().catch(()=>null):null;if(!s.ok){const t=new Error(i?.error||"SERVER_ERROR");throw t.status=s.status,t.code=i?.error||"SERVER_ERROR",t.details=i?.details,t}return i}}}();