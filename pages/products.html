<!DOCTYPE html>
<html lang="en" data-theme="default">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Healthy Sugar Free Chocolate | Me to Millets</title>
    <meta name="description" content="Buy healthy chocolate with sorghum‚Äîsweetened with honey & dates, with zero preservatives. Explore sugar free chocolate bars and gifts in India.">
    <meta name="keywords" content="buy healthy chocolate, sorghum chocolate online, sugar-free chocolate shop, ethical chocolate store, natural sweetener chocolate, artisan chocolate India">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://metomillets.me/pages/products.html">

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Me to Millets",
            "url": "https://metomillets.me/",
            "logo": "https://metomillets.me/images/icons/logo3.png",
            "contactPoint": [
                {
                    "@type": "ContactPoint",
                    "telephone": "+91-8750441860",
                    "contactType": "customer support",
                    "email": "metomillets@gmail.com",
                    "areaServed": "IN",
                    "availableLanguage": ["en"]
                }
            ]
        }
        </script>
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://metomillets.me/pages/products.html">
    <meta property="og:title" content="Shop Premium Sorghum Chocolates | Me to Millets">
    <meta property="og:description" content="Explore our collection of healthy, ethical chocolates made with sorghum and natural sweeteners.">
    <meta property="og:image" content="https://metomillets.me/images/icons/logo2.jpg">
    <meta property="og:site_name" content="Me to Millets">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://metomillets.me/pages/products.html">
    <meta name="twitter:title" content="Shop Premium Sorghum Chocolates">
    <meta name="twitter:description" content="Healthy chocolates with sorghum & natural sweeteners">
    <meta name="twitter:image" content="https://metomillets.me/images/icons/logo2.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="96x96" href="../images/icons/logo3.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/icons/logo3.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/background.css">
    <link rel="stylesheet" href="../css/mobile.css">
    
    <!-- Performance hints / non-blocking icons -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <script defer src="../js/async-fontawesome.js"></script>

    <!-- Header loader -->
    <script defer src="../js/header-loader.js"></script>
    <style>
        .products-page {
            padding: var(--spacing-xl) 0;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: var(--spacing-xxl);
            padding: var(--spacing-xxl) 0 var(--spacing-xl);
        }

        .page-header h1 {
            font-size: clamp(2rem, 3vw, 3rem);
            margin-bottom: var(--spacing-sm);
            letter-spacing: 0.02em;
        }

        .page-header p {
            max-width: 860px;
            margin: 0 auto;
            color: var(--light-chocolate);
            line-height: 1.7;
        }

        .page-header a {
            color: var(--gold);
            font-weight: 700;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-xxl);
        }
        
        .product-card {
            background: var(--white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: all var(--transition-normal);
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .product-badge {
            position: absolute;
            top: var(--spacing-md);
            left: var(--spacing-md);
            background: var(--gold);
            color: var(--white);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 1;
        }
        
        .product-image {
            height: 200px;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-content {
            padding: var(--spacing-lg);
        }
        
        .product-title {
            font-size: 1.25rem;
            margin-bottom: var(--spacing-sm);
            line-height: 1.4;
        }
        
        .product-description {
            color: var(--light-chocolate);
            font-size: 0.9rem;
            margin-bottom: var(--spacing-md);
            height: 60px;
            overflow: hidden;
        }
        
        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        
        .product-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
        }
        
        .product-rating {
            color: var(--gold);
        }
        
        .product-image {
            position: relative;
        }

        .product-actions.overlay-left {
            position: absolute;
            left: var(--spacing-md);
            top: var(--spacing-md);
            transform: none;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            align-items: stretch;
            z-index: 2;
        }

        .product-actions.overlay-left .btn {
            width: 120px;
            min-width: 120px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-xxl);
        }
        
        .pagination-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--white);
            border: 1px solid var(--medium-gray);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-normal);
            font-family: var(--font-body);
        }
        
        .pagination-btn:hover {
            background: var(--light-pink);
            border-color: var(--primary-pink);
        }
        
        .pagination-btn.active {
            background: var(--primary-pink);
            color: var(--white);
            border-color: var(--primary-pink);
        }
        
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .no-products {
            text-align: center;
            padding: var(--spacing-xxl);
            grid-column: 1 / -1;
        }
        
        .no-products i {
            font-size: 4rem;
            color: var(--medium-gray);
            margin-bottom: var(--spacing-lg);
        }
        
        @media (max-width: 768px) {
            .products-filter {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-categories {
                justify-content: center;
            }
            
            .product-actions.overlay-left {
                left: var(--spacing-sm);
                right: auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <div id="header-container" data-header-src="../header-pages.html"></div>
    </header>

    <main class="products-page">
        <div class="container">
            <div class="page-header">
                <h1>Our Chocolate Collection</h1>
                <p>Discover our range of premium, ethically-sourced chocolates. Learn about <a href="millets.html">sorghum in our healthy chocolate</a> and check <a href="allergens.html">ingredients & allergen information</a> before you buy.</p>
            </div>
            
            
            
            <div class="products-grid" id="productsGrid">
                <!-- Products will be loaded here -->
                <div class="loading-products">
                    <p>Loading chocolates...</p>
                </div>
            </div>
            
            <div class="pagination">
                <button class="pagination-btn" id="prevPage" disabled>
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <div class="page-numbers" id="pageNumbers">
                    <button class="pagination-btn active">1</button>
                    <button class="pagination-btn">2</button>
                    <button class="pagination-btn">3</button>
                </div>
                <button class="pagination-btn" id="nextPage">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
    </main>

    <!-- Footer (Copy from index.html) -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="footer-logo">
                        <div style="width: 40px; height: 40px; background: var(--gold); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: var(--spacing-md);">M</div>
                        <h3>Me to Millets</h3>
                    </div>
                    <p class="footer-description">Premium, ethical chocolates with 100% processed-free sugar, sweetened naturally with honey & dates.</p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/metomillets/" aria-label="Me to Millets on Instagram"><i class="fab fa-instagram" aria-hidden="true"></i></a>
                        <a href="#" aria-label="Me to Millets on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                        <!-- Pinterest removed -->
                        <a href="https://www.youtube.com/@Metomillets" aria-label="Me to Millets on YouTube"><i class="fab fa-youtube" aria-hidden="true"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h4>Shop</h4>
                    <ul class="footer-links">
                        <li><a href="products.html?category=gifts">üéÅ Gift Hampers</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4>Company</h4>
                    <ul class="footer-links">
                        <li><a href="about.html">Our Story</a></li>
                        <li><a href="about.html#ethics">Ethical Sourcing</a></li>
                        <li><a href="about.html#sustainability">Sustainability</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4>Support</h4>
                    <ul class="footer-links">
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="shipping.html">Shipping & Returns</a></li>
                        <li><a href="allergens.html">Allergen Information</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 Me to Millets. All rights reserved. | Made with <i class="fas fa-heart"></i> and üç´</p>
            </div>
        </div>
    </footer>
    <!-- You would also include the footer here, with corrected paths -->

    <!-- Sidebar Backdrop -->
    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <!-- Cart Sidebar (Copy from index.html) -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Your Chocolate Cart</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart" id="emptyCart">
                <i class="fas fa-shopping-cart"></i>
                <p>Your cart is empty</p>
                <a href="products.html" class="btn btn-primary">Start Shopping</a>
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span class="total-price" id="cartTotal">$0.00</span>
            </div>
            <a href="#" class="btn btn-primary btn-block" id="checkoutBtn">Proceed to Checkout</a>
            <a href="#" class="btn btn-secondary btn-block" id="viewFullCart">View Full Cart</a>
        </div>
    </div>

    <!-- JavaScript Files -->
    <!-- =================================================================
    JavaScript
    ================================================================== -->
    <!-- Make sure JS paths are also relative -->
    <script src="../js/product-data.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/cart.js"></script>
    <script src="../js/reviews.js"></script>
    <script src="../js/search.js"></script>
    <script src="../js/main.js"></script>
    <script>
        // Products Page Script
        document.addEventListener('DOMContentLoaded', function() {
            ensureProductData(() => {
                const productsPage = new ProductsPage();
                productsPage.init();
            });
        });

        function ensureProductData(onReady) {
            // If product data is already on window, proceed immediately
            if (window.productData && Array.isArray(window.productData.products)) {
                onReady();
                return;
            }

            // Try to load the script dynamically if it failed to load initially
            const script = document.createElement('script');
            script.src = '../js/product-data.js';
            script.onload = () => {
                if (window.productData && Array.isArray(window.productData.products)) {
                    onReady();
                } else {
                    showProductLoadError('Product data loaded but no products were found.');
                }
            };
            script.onerror = () => {
                showProductLoadError('Could not load product data. Please refresh or check the script path.');
            };

            document.head.appendChild(script);
        }

        function showProductLoadError(message) {
            const container = document.getElementById('productsGrid');
            if (container) {
                container.innerHTML = `
                    <div class="no-products">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3>Chocolates could not load</h3>
                        <p>${message}</p>
                        <button class="btn btn-primary" onclick="window.location.reload()">Try Again</button>
                    </div>
                `;
            }
            console.error(message);
        }

        class ProductsPage {
            constructor() {
                this.currentCategory = 'all';
                this.currentSort = 'featured';
                this.currentPage = 1;
                this.productsPerPage = 9;
                this.allProducts = [];
                this.filteredProducts = [];
                this.searchQuery = '';
            }
            
            init() {
                const data = window.productData;
                if (!data || !Array.isArray(data.products)) {
                    showProductLoadError('Product data is unavailable.');
                    return;
                }

                this.loadProducts();
                this.setupSortListener();
                this.checkURLParams();
            }
            
            loadProducts() {
                if (window.productData && window.productData.products) {
                    this.allProducts = [...window.productData.products];
                    this.applyFilters();
                } else {
                    showProductLoadError('Product data not loaded.');
                }
            }
            
            checkURLParams() {
                const urlParams = new URLSearchParams(window.location.search);
                const category = urlParams.get('category');
                const searchQuery = urlParams.get('search');
                
                if (category) {
                    this.currentCategory = category;
                }
                if (searchQuery) {
                    this.searchQuery = searchQuery.trim().toLowerCase();
                    const searchInputInHeader = document.querySelector('.search-input');
                    if (searchInputInHeader) searchInputInHeader.value = this.searchQuery;
                }
                this.updateCategoryButtons();
                this.applyFilters();
            }
            
            setupSortListener() {
                // Pagination buttons
                const prevBtn = document.getElementById('prevPage');
                const nextBtn = document.getElementById('nextPage');
                
                if (prevBtn) {
                    prevBtn.addEventListener('click', () => {
                        if (this.currentPage > 1) {
                            this.currentPage--;
                            this.renderProducts();
                            this.updatePagination();
                        }
                    });
                }
                
                if (nextBtn) {
                    nextBtn.addEventListener('click', () => {
                        const totalPages = Math.ceil(this.filteredProducts.length / this.productsPerPage);
                        if (this.currentPage < totalPages) {
                            this.currentPage++;
                            this.renderProducts();
                            this.updatePagination();
                        }
                    });
                }
                
                // Page number buttons
                document.getElementById('pageNumbers').addEventListener('click', (e) => {
                    if (e.target.classList.contains('pagination-btn') && !e.target.classList.contains('active')) {
                        this.currentPage = parseInt(e.target.textContent);
                        this.renderProducts();
                    }
                });
            }
            
            applyFilters() {
                // Filter by category
                if (this.currentCategory === 'all') {
                    this.filteredProducts = [...this.allProducts];
                } else {
                    this.filteredProducts = this.allProducts.filter(product => {
                        // Check category or subcategory
                        return product.category === this.currentCategory || 
                               product.subcategory === this.currentCategory;
                    });
                }
                // Filter by search query
                if (this.searchQuery) {
                    this.filteredProducts = this.filteredProducts.filter(product => {
                        const query = this.searchQuery;
                        return (
                            product.name.toLowerCase().includes(query) ||
                            product.description.toLowerCase().includes(query) ||
                            product.category.toLowerCase().includes(query)
                        );
                    });
                }
                
                // Sort products
                this.sortProducts();
                
                // Render products
                this.renderProducts();
                
                // Update pagination
                this.updatePagination();
            }

            updateCategoryButtons() {
                const container = document.getElementById('categoryFilters');
                if (!container) return;

                // Build a full list with an "all" option plus configured categories with counts
                const categoryCounts = (window.productData && window.productData.getCategoryCounts)
                    ? window.productData.getCategoryCounts()
                    : {};

                const baseCategories = window.productData?.categories || [];
                const categories = [
                    { id: 'all', name: 'All Chocolates', count: this.allProducts.length },
                    ...baseCategories.map(cat => ({
                        ...cat,
                        count: categoryCounts[cat.id] ?? cat.count ?? 0
                    }))
                ];

                container.innerHTML = categories.map(cat => `
                    <button class="filter-btn ${cat.id === this.currentCategory ? 'active' : ''}" data-category="${cat.id}">
                        ${cat.name} (${cat.count})
                    </button>
                `).join('');

                // Wire up category filters and re-render when changed
                container.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.currentCategory = btn.dataset.category;
                        this.currentPage = 1;
                        this.updateCategoryButtons();
                        this.applyFilters();
                    });
                });
            }

            sortProducts() {
                switch(this.currentSort) {
                    case 'price-low':
                        this.filteredProducts.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-high':
                        this.filteredProducts.sort((a, b) => b.price - a.price);
                        break;
                    case 'rating':
                        this.filteredProducts.sort((a, b) => b.rating - a.rating);
                        break;
                    case 'newest':
                        // Assuming newer products have higher IDs
                        this.filteredProducts.sort((a, b) => b.id - a.id);
                        break;
                    case 'featured':
                    default:
                        // Featured first, then by rating
                        this.filteredProducts.sort((a, b) => {
                            if (a.featured && !b.featured) return -1;
                            if (!a.featured && b.featured) return 1;
                            return b.rating - a.rating;
                        });
                        break;
                }
            }
            
            renderProducts() {
                const container = document.getElementById('productsGrid');
                if (!container) return;
                
                // Calculate pagination
                const startIndex = (this.currentPage - 1) * this.productsPerPage;
                const endIndex = startIndex + this.productsPerPage;
                const pageProducts = this.filteredProducts.slice(startIndex, endIndex);
                
                if (this.filteredProducts.length === 0) {
                    container.innerHTML = `
                        <div class="no-products">
                            <i class="fas fa-search"></i>
                            <h3>No chocolates found</h3>
                            <p>Try selecting a different category</p>
                            <button class="btn btn-primary" onclick="window.location.href='products.html'">
                                View All Products
                            </button>
                        </div>
                    `;
                    return;
                }
                
                let html = '';
                pageProducts.forEach(product => {
                    const utils = window.utils;
                    const ratingHTML = utils && utils.generateStarRating
                        ? utils.generateStarRating(product.rating)
                        : `${product.rating} ‚òÖ`;

                    html += `
                        <div class="product-card" data-id="${product.id}">
                            
                            <div class="product-image">
                                <img src="${product.image || '/images/icons/logo.png'}" alt="${product.name}">
                                <div class="product-actions overlay-left">
                                    <button class="btn btn-primary buy-now" data-id="${product.id}">
                                        Buy Now
                                    </button>
                                    <button class="btn btn-secondary add-to-wishlist" data-id="${product.id}" aria-label="Add to wishlist">
                                        <i class="far fa-heart" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="product-content">
                                <h3 class="product-title">${product.name}</h3>
                                <p class="product-description">${product.description}</p>
                                <div class="product-meta">
                                    <span class="product-rating">${ratingHTML}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                
                // Add event listeners to buttons
                this.addProductEventListeners();
            }
            
            addProductEventListeners() {
                console.log('addProductEventListeners attaching handlers for', this.allProducts?.length || 0, 'products');
                // Buy Now buttons
                document.querySelectorAll('.buy-now').forEach(button => {
                    button.addEventListener('click', (e) => {
                        console.log('buy-now clicked', e.currentTarget.dataset.id);
                        const productId = parseInt(e.currentTarget.dataset.id);
                        if (productId) {
                            const url = productId === 27
                                ? 'assorted-mini-box.html'
                                : `product-detail.html?id=${productId}`;
                            window.location.href = url;
                        }
                    });
                });
                
                // Add to Wishlist buttons
                document.querySelectorAll('.add-to-wishlist').forEach(button => {
                    button.addEventListener('click', (e) => {
                        console.log('add-to-wishlist clicked', e.currentTarget.dataset.id);
                        const productId = parseInt(e.currentTarget.dataset.id);
                        const product = this.allProducts.find(p => p.id === productId);
                        
                        if (product && window.cartManager) {
                            window.cartManager.addToWishlist({
                                ...product,
                                image: product.image || '/images/icons/logo.png'
                            });
                        }
                    });
                });
                
                
                
                // Product Card Click Handler
                document.querySelectorAll('.product-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        console.log('product-card clicked', card.dataset.id, 'target', e.target.tagName, e.target.className);
                        if (!e.target.closest('.product-actions') && !e.target.closest('button')) {
                            const productId = parseInt(card.dataset.id);
                            if (productId) {
                                const url = productId === 27
                                    ? 'assorted-mini-box.html'
                                    : `product-detail.html?id=${productId}`;
                                window.location.href = url;
                            }
                        }
                    });
                });

                // Delegated fallback: handle clicks that may not have attached handlers
                document.addEventListener('click', (ev) => {
                    try {
                        const card = ev.target && ev.target.closest ? ev.target.closest('.product-card') : null;
                        if (card && !ev.target.closest('.product-actions') && !ev.target.closest('button')) {
                            console.log('delegated product-card click', card.dataset.id);
                            const productId = parseInt(card.dataset.id);
                            if (productId) {
                                const url = productId === 27
                                    ? 'assorted-mini-box.html'
                                    : `product-detail.html?id=${productId}`;
                                window.location.href = url;
                            }
                        }
                    } catch (err) { console.error('delegated click handler error', err); }
                });
            }
            
            updatePagination() {
                const totalPages = Math.ceil(this.filteredProducts.length / this.productsPerPage);
                const prevBtn = document.getElementById('prevPage');
                const nextBtn = document.getElementById('nextPage');
                const pageNumbers = document.getElementById('pageNumbers');
                
                // Update previous/next buttons
                if (prevBtn) {
                    prevBtn.disabled = this.currentPage === 1;
                }
                
                if (nextBtn) {
                    nextBtn.disabled = this.currentPage === totalPages || totalPages === 0;
                }
                
                // Update page numbers
                if (pageNumbers && totalPages > 0) {
                    let pageButtons = '';
                    const maxVisiblePages = 3;
                    let startPage = Math.max(1, this.currentPage - 1);
                    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
                    
                    // Adjust start page if we're near the end
                    if (endPage - startPage + 1 < maxVisiblePages) {
                        startPage = Math.max(1, endPage - maxVisiblePages + 1);
                    }
                    
                    for (let i = startPage; i <= endPage; i++) {
                        pageButtons += `
                            <button class="pagination-btn ${i === this.currentPage ? 'active' : ''}">
                                ${i}
                            </button>
                        `;
                    }
                    
                    pageNumbers.innerHTML = pageButtons;
                }
            }
            
            showQuickView(product) {
                // Create quick view modal
                const modalHTML = `
                    <div class="quick-view-modal" id="quickViewModal">
                        <div class="modal-overlay" id="modalOverlay"></div>
                        <div class="modal-content">
                            <button class="close-modal" id="closeQuickView">&times;</button>
                            <div class="quick-view-container">
                                <div class="product-images">
                                    <img src="${product.image || '/images/icons/logo.png'}" alt="${product.name}">
                                </div>
                                <div class="product-details">
                                    <h2>${product.name}</h2>
                                    <div class="product-rating">
                                        ${window.utils.generateStarRating(product.rating)}
                                        <span class="review-count">(${product.reviews} reviews)</span>
                                    </div>
                                    <div class="product-price">${window.utils.formatPrice(product.price)}</div>
                                    <p class="product-description">${product.description}</p>
                                    
                                    <div class="product-specs">
                                        <div class="spec">
                                            <strong>Category:</strong>
                                            <span>${product.category.charAt(0).toUpperCase() + product.category.slice(1)}</span>
                                        </div>
                                        <div class="spec">
                                            <strong>Origin:</strong>
                                            <span>${product.origin}</span>
                                        </div>
                                    </div>
                                    
                                    <div class="pairing-suggestions">
                                        <h4>Perfect Pairings:</h4>
                                        <div class="pairing-tags">
                                            ${product.pairing.map(item => `<span class="pairing-tag">${item}</span>`).join('')}
                                        </div>
                                    </div>
                                    
                                    <div class="product-actions">
                                        <button class="btn btn-primary" onclick="window.location.href='${product.id === 27 ? 'assorted-mini-box.html' : 'product-detail.html?id=' + product.id}'">
                                            üéØ Buy Now
                                        </button>
                                        <button class="btn btn-secondary add-to-wishlist-quick" data-id="${product.id}">
                                            <i class="far fa-heart"></i> Add to Wishlist
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Add modal to page
                const modalContainer = document.createElement('div');
                modalContainer.innerHTML = modalHTML;
                document.body.appendChild(modalContainer);
                
                // Add modal styles if not already added
                if (!document.querySelector('#quick-view-modal-styles')) {
                    const styles = document.createElement('style');
                    styles.id = 'quick-view-modal-styles';
                    styles.textContent = `
                        .quick-view-modal {
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            z-index: 1000;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        }
                        
                        .modal-overlay {
                            position: absolute;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0,0,0,0.5);
                            backdrop-filter: blur(5px);
                        }
                        
                        .modal-content {
                            position: relative;
                            background: var(--white);
                            border-radius: var(--radius-lg);
                            max-width: 900px;
                            width: 90%;
                            max-height: 90vh;
                            overflow-y: auto;
                            padding: var(--spacing-xl);
                            z-index: 1001;
                            animation: modalSlideIn 0.3s ease;
                        }
                        
                        @keyframes modalSlideIn {
                            from {
                                opacity: 0;
                                transform: translateY(-50px);
                            }
                            to {
                                opacity: 1;
                                transform: translateY(0);
                            }
                        }
                        
                        .close-modal {
                            position: absolute;
                            top: var(--spacing-md);
                            right: var(--spacing-md);
                            background: none;
                            border: none;
                            font-size: 2rem;
                            cursor: pointer;
                            color: var(--dark-chocolate);
                            z-index: 1002;
                        }
                        
                        .quick-view-container {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: var(--spacing-xl);
                        }
                        
                        .product-images img {
                            width: 100%;
                            border-radius: var(--radius-lg);
                            box-shadow: var(--shadow-md);
                        }
                        
                        @media (max-width: 768px) {
                            .quick-view-container {
                                grid-template-columns: 1fr;
                            }
                        }
                    `;
                    document.head.appendChild(styles);
                }
                
                // Add event listeners
                const closeBtn = modalContainer.querySelector('#closeQuickView');
                const overlay = modalContainer.querySelector('#modalOverlay');
                
                const closeModal = () => {
                    modalContainer.remove();
                };
                
                if (closeBtn) {
                    closeBtn.addEventListener('click', closeModal);
                }
                
                if (overlay) {
                    overlay.addEventListener('click', closeModal);
                }
                
                // Add to cart button in modal
                const addToCartBtn = modalContainer.querySelector('.add-to-cart-quick');
                if (addToCartBtn && window.cartManager) {
                    addToCartBtn.addEventListener('click', () => {
                        window.cartManager.addToCart({
                            ...product,
                            image: product.image || '/images/icons/logo.png'
                        });
                        window.utils.showNotification(`${product.name} added to cart!`, 'success');
                        closeModal();
                    });
                }
                
                // Add to wishlist button in modal
                const addToWishlistBtn = modalContainer.querySelector('.add-to-wishlist-quick');
                if (addToWishlistBtn && window.cartManager) {
                    addToWishlistBtn.addEventListener('click', () => {
                        window.cartManager.addToWishlist({
                            ...product,
                            image: product.image || '/images/icons/logo.png'
                        });
                        window.utils.showNotification(`${product.name} added to wishlist!`, 'success');
                        closeModal();
                    });
                }
                
                // Close with Escape key
                const handleEscape = (e) => {
                    if (e.key === 'Escape') {
                        closeModal();
                        document.removeEventListener('keydown', handleEscape);
                    }
                };
                document.addEventListener('keydown', handleEscape);
            }
        }
        
        // Initialize cart and wishlist functionality
        if (window.cartManager) {
            window.cartManager.updateCartCount();
            window.cartManager.updateWishlistCount();
            
            // Setup cart sidebar
            const cartBtn = document.getElementById('cartBtn');
            const closeCart = document.getElementById('closeCart');
            const cartSidebar = document.getElementById('cartSidebar');
            const sidebarBackdrop = document.getElementById('sidebarBackdrop');
            
            if (cartBtn && cartSidebar) {
                cartBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    cartSidebar.classList.add('show');
                    if (sidebarBackdrop) sidebarBackdrop.classList.add('show');
                    document.body.style.overflow = 'hidden';
                    window.cartManager.renderCartItems();
                });
            }
            
            if (closeCart && cartSidebar) {
                closeCart.addEventListener('click', () => {
                    cartSidebar.classList.remove('show');
                    if (sidebarBackdrop) sidebarBackdrop.classList.remove('show');
                    document.body.style.overflow = '';
                });
            }
            
            // Close cart when clicking backdrop
            if (sidebarBackdrop) {
                sidebarBackdrop.addEventListener('click', () => {
                    if (cartSidebar.classList.contains('show')) {
                        cartSidebar.classList.remove('show');
                        sidebarBackdrop.classList.remove('show');
                        document.body.style.overflow = '';
                    }
                });
            }
        }
        
        // Mobile navigation
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const closeMobileNav = document.getElementById('closeMobileNav');
        const mobileNav = document.getElementById('mobileNav');
        
        if (mobileMenuBtn && mobileNav) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileNav.classList.add('show');
            });
        }
        
        if (closeMobileNav && mobileNav) {
            closeMobileNav.addEventListener('click', () => {
                mobileNav.classList.remove('show');
            });
        }
    </script>
</body>
</html>